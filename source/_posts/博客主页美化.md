---
title: 博客主页美化
tags: 美化
category: 主页美化
reward: true
# toc: true
cover: http://api.mtyqx.cn/tapi/random.php?121253
# coverWidth: 1200
# coverHeight: 750
comments: true
---



## 文章封面生成随机图片

使用: 只要请求图片时, 将路径改为API提供的路径即可.

对于Markdown来说:
```
![image_infp](API_URL)
```

对于HTML来说是修改src属性:
```
<img src="API_URL" />
```
但是仅仅这样做会出现一个问题:

当前页面使用同一个api链接的文章, 图片显示的都是同一张!(说好的随机呢?)

问题就出现在, 发起请求时, 由于链接地址是同一个, 实际上即使同一个页面中有多个(相同)图片链接, 也仅仅发起一次请求, 所以也就返回一张图片了!

所以只要修改链接不同即可!

以本博客使用到的api为例: http://api.mtyqx.cn/tapi/random.php

可以在末尾添加`?x`, 其中`x`是一个数字, 如: https://img.paulzzh.tech/touhou/random?54615

此时这是两个完全不同的请求, 所以显示的图片即为不同了!

### 附随机图片的一些API
- 二次元: https://img.paulzzh.tech/touhou/random
- 二次元: http://www.dmoe.cc/random.php
- 二次元：http://api.mtyqx.cn/tapi/random.php

## 添加动漫人物(看板娘)
Hexo博客本身支持看板娘的，三步即可。

第一步，在主目录下执行命令：
```bash
npm install --save hexo-helper-live2d
```
第二步，同样在主目录下执行：
```bash
npm install live2d-widget-model-shizuku
```
`live2d-widget-model-shizuku`是可选项。可选的模型如下：
```
live2d-widget-model-chitose
live2d-widget-model-epsilon2_1
live2d-widget-model-gf
live2d-widget-model-haru
live2d-widget-model-haruto
live2d-widget-model-hibiki
live2d-widget-model-hijiki
live2d-widget-model-izumi
live2d-widget-model-koharu
live2d-widget-model-miku
live2d-widget-model-ni-j
live2d-widget-model-nico
live2d-widget-model-nietzsche
live2d-widget-model-nipsilon
live2d-widget-model-nito
live2d-widget-model-shizuku
live2d-widget-model-tororo
live2d-widget-model-tsumiki
live2d-widget-model-unitychan
live2d-widget-model-wanko
live2d-widget-model-z16
```



第三步，在根目录配置文件（_config.yml）中添加如下代码：

```bash
live2d:
  enable: true
  scriptFrom: local
  pluginRootPath: live2dw/
  pluginJsPath: lib/
  pluginModelPath: assets/
  tagMode: false
  log: false
  model:
    use: live2d-widget-model-shizuku
  display:
    position: right
    width: 150
    height: 300
  mobile:
    show: true
  react:
    opacity: 0.7
```
然后重新部署即可。



hexo博客本身看板娘角色比较单调，stevenjoezhang大佬写了一个可以说话，可以换装的看板娘项目并开源，使用起来也是非常的方便。下面是Nexmoe主题下的安装步骤。

1. 下载大神的仓库[live2d-widget](https://github.com/stevenjoezhang/live2d-widget)到主目录`\themes\nexmoe\source`下，修改`live2d-widget`目录下的`autoload.js`文件中的路径
```
// 注意：live2d_path 参数应使用绝对路径
//const live2d_path = "https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/";
const live2d_path = "/live2d-widget/";

```
2. 往`\themes\nexmoe\layout\_partial\_post`目录下的`header.ejs`添加以下代码(在第一个`div`标签内):
```
// 注意：live2d_path 参数应使用绝对路径
//const live2d_path = "https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/";
const live2d_path = "/live2d-widget/";
```

3. 在根目录配置文件（_config.yml）中添加如下代码：
```
live2d: ##自定义看板娘动画
  enable: true
```
然后重新部署即可。想修改看板娘大小、位置、格式、文本内容等，可查看并修改 `waifu-tips.js` 、 `waifu-tips.json` 和 `waifu.css`。其实看板娘可以侧边隐藏，对样本的修改影响也不大。

## 添加评论

本篇博客使用的主题是`nexmoe`主题，它的配置评论的方式如下（gitalk为例）：

- 在[GitHub](https://github.com/settings/applications/new)上申请`OAuth application`

  ![](博客主页美化/gitalk_appl.png)  

- 点击生成后，记住`Client ID`和 `Client Secret`
- 在`themes`文件夹下的`_config.nexmoe.yml`文件中，把刚才的`Client ID`和 `Client Secret`填在下面方框：
  ```bash
  slotComment: '
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
  <div id="gitalk-container"></div>
  <script type="text/javascript">
  const gitalk = new Gitalk({
    clientID: "",
    clientSecret: "",
    repo: "CHH3213.github.io",      
    owner: "CHH3213",
    admin: "CHH3213",
    id: window.location.pathname    
  });
  gitalk.render("gitalk-container")
  </script>
  '
  ```
  ![](博客主页美化/config.png)  
- 在需要开启评论框的文章中，需要开启评论：`comments: true`即可。
- 最后，`hexo g -d`部署生成后登录评论框初始化即可。


> `nexmoe`主题的评论已经支持了任何评论系统，在`themes/nexmoe/layout/post.ejs`文件中可以看到，它是这么开启的
> ![](博客主页美化/slot.png)  